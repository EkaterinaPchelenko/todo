(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),c=n(33),o=n.n(c),a=(n(39),n(10)),i=n(11),l=n(13),u=n(12),j=(n.p,n(40),n(9)),h=n.n(j),d=n(23),b=n.n(d),p=n(0),O=function(e){var t=e.user;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.username}),Object(p.jsx)("td",{children:t.first_name}),Object(p.jsx)("td",{children:t.last_name}),Object(p.jsx)("td",{children:t.email})]})},f=function(e){var t=e.users;return Object(p.jsxs)("table",{children:[Object(p.jsx)("th",{children:"Username"}),Object(p.jsx)("th",{children:"First name"}),Object(p.jsx)("th",{children:"Last name"}),Object(p.jsx)("th",{children:"Email"}),t.map((function(e){return Object(p.jsx)(O,{user:e})}))]})},x=n(4),m=function(e){var t=e.project,n=e.deleteProject;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.id}),Object(p.jsx)("td",{children:t.name}),Object(p.jsx)("td",{children:t.repository_link}),Object(p.jsx)("td",{children:Object(p.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},v=function(e){var t=e.projects,n=e.deleteProject;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("table",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Id"}),Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Repository link"}),Object(p.jsx)("th",{})]}),t.map((function(e){return Object(p.jsx)(m,{project:e,deleteProject:n})}))]}),Object(p.jsx)(x.b,{to:"/projects/create",children:" Create "})]})},g=n(2),k=function(e){var t=e.location;return Object(p.jsx)("div",{children:Object(p.jsxs)("h2",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 '",t.pathname,"' \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]})})},y=function(e){var t=e.todo,n=e.deleteToDo;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.text}),Object(p.jsx)("td",{children:t.created_at}),Object(p.jsx)("td",{children:t.creator}),Object(p.jsx)("td",{children:t.project}),Object(p.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})]})},_=function(e){var t=e.todo,n=e.deleteToDo;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("table",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Text"}),Object(p.jsx)("th",{children:"The date of creation"}),Object(p.jsx)("th",{children:"Id of creator"}),Object(p.jsx)("th",{children:"Id of project"})]}),t.map((function(e){return Object(p.jsx)(y,{todo:e,deleteToDo:n})}))]}),Object(p.jsx)(x.b,{to:"/todo/create",children:" Create "})]})},C=n(15),S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={login:"",password:""},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(p.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(s.a.Component),D=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={name:"",users:[],repository_link:""},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleUserChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.users,this.state.repository_link),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"login",children:"name"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"users",children:"user"}),Object(p.jsx)("select",{name:"users",multiple:!0,onChange:function(t){return e.handleUserChange(t)},children:this.props.users.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.first_name})}))})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"repository_link",children:"repository link"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"repository_link",value:this.state.repository_link,onChange:function(t){return e.handleChange(t)}})]}),Object(p.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(s.a.Component),T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={text:"",creator:0,project:0},r}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleProjectChange",value:function(e){if(e.target.selectedOptions){var t=e.target.selectedOptions.item(0).value;this.setState({projects:t})}else this.setState({projects:[]})}},{key:"handleCreatorChange",value:function(e){if(e.target.selectedOptions){var t=e.target.selectedOptions.item(0).value;this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.createToDo(this.state.text,this.state.users,this.state.projects),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"login",children:"text"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"text",value:this.state.text,onChange:function(t){return e.handleChange(t)}})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"user",children:"creator"}),Object(p.jsx)("select",{name:"users",onChange:function(t){return e.handleCreatorChange(t)},children:this.props.users.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.first_name})}))})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"project",children:"project"}),Object(p.jsx)("select",{name:"projects",onChange:function(t){return e.handleProjectChange(t)},children:this.props.projects.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name})}))})]}),Object(p.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(s.a.Component),P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this)).state={users:[],projects:[],todo:[],token:[],username:[]},r}return Object(i.a)(n,[{key:"createProject",value:function(e,t,n){var r=this,s=this.get_headers(),c={name:e,users:t,repository_link:n};console.log(c),h.a.post("http://127.0.0.1:8000/api/projects/",c,{headers:s}).then((function(e){r.load_data()})).catch((function(e){console.log(e),r.setState({projects:[]})}))}},{key:"createToDo",value:function(e,t,n){var r=this,s=this.get_headers(),c={text:e,creator:t,project:n};console.log(c),h.a.post("http://127.0.0.1:8000/api/todo/",c,{headers:s}).then((function(e){r.load_data()})).catch((function(e){console.log(e),r.setState({todo:[]})}))}},{key:"deleteProject",value:function(e){var t=this;console.log(e);var n=this.get_headers();h.a.delete("http://127.0.0.1:8000/api/projects/".concat(e),{headers:n}).then((function(e){t.load_data()})).catch((function(e){console.log(e),t.setState({projects:[]})}))}},{key:"deleteToDo",value:function(e){var t=this;console.log(e);var n=this.get_headers();h.a.delete("http://127.0.0.1:8000/api/todo/".concat(e,"/"),{headers:n}).then((function(e){t.load_data()})).catch((function(e){console.log(e),t.setState({todo:[]})}))}},{key:"set_token",value:function(e){var t=this;console.log(e),(new b.a).set("token",e),this.setState({token:e},(function(){return t.load_data()}))}},{key:"is_auth",value:function(){return!!this.state.token}},{key:"logout",value:function(){this.set_token(""),this.state.username=[]}},{key:"get_token_from_storage",value:function(){var e=this,t=(new b.a).get("token");this.setState({token:t},(function(){return e.load_data()}))}},{key:"get_token",value:function(e,t){var n=this,r={username:e,password:t};h.a.post("http://127.0.0.1:8000/api-token-auth/",r).then((function(t){n.set_token(t.data.token),console.log(t.data),n.usernameDefine(e)})).catch((function(e){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))}},{key:"load_data",value:function(){var e=this,t=this.get_headers();h.a.get("http://127.0.0.1:8000/api/users/",{headers:t}).then((function(t){var n=t.data.results;e.setState({users:n})})).catch((function(t){console.log(t),e.setState({users:[]})})),h.a.get("http://127.0.0.1:8000/api/projects/",{headers:t}).then((function(t){var n=t.data.results;e.setState({projects:n})})).catch((function(t){console.log(t),e.setState({projects:[]})})),h.a.get("http://127.0.0.1:8000/api/todo/",{headers:t}).then((function(t){for(var n=[],r=0;r<t.data.results.length;r++)t.data.results[r].is_active&&n.push(t.data.results[r]);console.log(n),e.setState({todo:n})})).catch((function(t){console.log(t),e.setState({todo:[]})}))}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json"};return this.is_auth()&&(e.Authorization="Token "+this.state.token),e}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"usernameDefine",value:function(e){this.state.username=e}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{children:Object(p.jsx)("div",{children:Object(p.jsxs)(x.a,{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:this.state.username}),Object(p.jsx)("ul",{children:Object(p.jsx)(x.b,{to:"/",children:"Users"})}),Object(p.jsx)("ul",{children:Object(p.jsx)(x.b,{to:"/projects",children:"Projects"})}),Object(p.jsx)("ul",{children:Object(p.jsx)(x.b,{to:"/todo",children:"To Do"})}),Object(p.jsx)("ul",{children:this.is_auth()?Object(p.jsx)("button",{onClick:function(){return e.logout()},children:" Logout "}):Object(p.jsx)(x.b,{to:"/login",children:"Login"})})]}),Object(p.jsx)("div",{children:Object(p.jsxs)(g.d,{children:[Object(p.jsx)(g.b,{exact:!0,path:"/",component:function(){return Object(p.jsx)(f,{users:e.state.users})}}),Object(p.jsx)(g.b,{exact:!0,path:"/projects",component:function(){return Object(p.jsx)(v,{projects:e.state.projects,deleteProject:function(t){return e.deleteProject(t)}})}}),Object(p.jsx)(g.b,{exact:!0,path:"/todo",component:function(){return Object(p.jsx)(_,{todo:e.state.todo,deleteToDo:function(t){return e.deleteToDo(t)}})}}),Object(p.jsx)(g.b,{exact:!0,path:"/login",component:function(){return Object(p.jsx)(S,{get_token:function(t,n){return e.get_token(t,n)}})}}),Object(p.jsx)(g.b,{exact:!0,path:"/projects/create",component:function(){return Object(p.jsx)(D,{users:e.state.users,createProject:function(t,n,r){return e.createProject(t,n,r)}})}}),Object(p.jsx)(g.b,{exact:!0,path:"/todo/create",component:function(){return Object(p.jsx)(T,{projects:e.state.projects,users:e.state.users,createToDo:function(t,n,r){return e.createToDo(t,n,r)}})}}),Object(p.jsx)(g.a,{from:"/users",to:"/"}),Object(p.jsx)(g.b,{component:k})]})}),Object(p.jsx)("footer",{children:Object(p.jsx)("div",{children:Object(p.jsx)("p",{children:"Copyright \xa9 To Do 2021"})})})]})})})}}]),n}(s.a.Component),N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),c(e),o(e)}))};o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(P,{})}),document.getElementById("root")),N()}},[[70,1,2]]]);
//# sourceMappingURL=main.dc37df53.chunk.js.map